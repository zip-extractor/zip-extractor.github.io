(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9134:function(e,t,s){Promise.resolve().then(s.bind(s,9180))},9180:function(e,t,s){"use strict";var a=s(6412),l=s(3832),n=s(239),c=s(5307),i=s.n(c),r=s(4341),d=s(683),o=s(3236),h=s(3160),p=s(9485),m=s(1210),u=s(8660);t.default=()=>{let[e,t]=(0,l.useState)([]),[s,c]=(0,l.useState)(!1),[x,b]=(0,l.useState)(0),[f,j]=(0,l.useState)(""),[y,g]=(0,l.useState)(new Set),[N,v]=(0,l.useState)([]),z=e=>{let t={};return e.forEach(e=>{let s=e.name.split("/").filter(e=>e),a="";s.slice(0,-1).forEach(e=>{t[a=a?"".concat(a,"/").concat(e):e]||(t[a]={name:e,type:"directory",path:a,children:[]})});let l=s.join("/");t[l]={name:s[s.length-1],type:"file",path:l,file:e}}),Object.values(t).forEach(e=>{"file"!==e.type&&(e.children=Object.values(t).filter(t=>t.path.substring(0,t.path.lastIndexOf("/"))===e.path),e.children.sort((e,t)=>e.type!==t.type?"directory"===e.type?-1:1:e.name.localeCompare(t.name)))}),Object.values(t).filter(e=>!t[e.path.includes("/")?e.path.substring(0,e.path.lastIndexOf("/")):""]).sort((e,t)=>e.type!==t.type?"directory"===e.type?-1:1:e.name.localeCompare(t.name))},w=async e=>{c(!0),j("");try{let s=new(i()),a=await e.arrayBuffer(),l=await s.loadAsync(a),n=[],c=0,r=Object.keys(l.files).length;for(let[e,t]of Object.entries(l.files)){if(!t.dir){let s=await t.async("blob");n.push({name:e,size:s.size,type:s.type||"application/octet-stream",blob:s})}c++,b(Math.round(c/r*100))}t(n),v(z(n))}catch(e){j("解压文件时出错，请确保上传的是有效的ZIP文件。"),console.error("Error extracting zip:",e)}finally{c(!1),b(0)}},O=e=>{g(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=y.has(e.path),l="".concat(1.5*t,"rem");return"directory"===e.type?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 hover:bg-zinc-750 rounded cursor-pointer",style:{paddingLeft:l},onClick:()=>O(e.path),children:[(0,a.jsx)("span",{className:"text-zinc-400",children:s?(0,a.jsx)(r.Z,{className:"w-4 h-4"}):(0,a.jsx)(d.Z,{className:"w-4 h-4"})}),s?(0,a.jsx)(o.Z,{className:"w-5 h-5 text-zinc-400"}):(0,a.jsx)(h.Z,{className:"w-5 h-5 text-zinc-400"}),(0,a.jsx)("span",{className:"text-zinc-300 text-sm",children:e.name})]}),s&&e.children&&(0,a.jsx)("div",{children:e.children.map(e=>Z(e,t+1))})]},e.path):(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-zinc-750 rounded group",style:{paddingLeft:"calc(".concat(l," + 1.5rem)")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-zinc-500 text-xs",children:B(e.file.size)})]})]}),(0,a.jsx)("button",{onClick:()=>I(e.file),className:"px-3 py-1 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors opacity-0 group-hover:opacity-100",children:"下载"})]},e.path)},k=(0,l.useCallback)(async e=>{let t=e[0];t&&"application/zip"===t.type?await w(t):j("请上传ZIP格式的文件")},[]),{getRootProps:C,getInputProps:E,isDragActive:S}=(0,n.uI)({onDrop:k,accept:{"application/zip":[".zip"]},multiple:!1}),I=e=>{let t=URL.createObjectURL(e.blob),s=document.createElement("a");s.href=t,s.download=e.name.split("/").pop(),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},B=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"bg-zinc-900 rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("div",{...C(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n            ".concat(S?"border-blue-500 bg-blue-500/10":"border-zinc-700 hover:border-zinc-600","\n          "),children:[(0,a.jsx)("input",{...E()}),(0,a.jsx)(m.Z,{className:"w-12 h-12 mx-auto mb-4 text-zinc-400"}),(0,a.jsx)("p",{className:"text-zinc-300",children:"拖放ZIP文件到这里，或点击选择文件"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-zinc-500",children:"支持上传ZIP格式文件"})]}),f&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400",children:f}),s&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"text-zinc-300",children:"正在解压文件..."})]}),(0,a.jsx)("div",{className:"w-full bg-zinc-800 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(x,"%")}})})]}),N.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-zinc-300 mb-4",children:"已解压的文件"}),(0,a.jsx)("div",{className:"bg-zinc-800/50 rounded-lg overflow-hidden",children:N.map(e=>Z(e))})]})]})})}}},function(e){e.O(0,[857,27,460,374,744],function(){return e(e.s=9134)}),_N_E=e.O()}]);